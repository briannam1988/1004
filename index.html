<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI ë¬¸êµ¬ ìƒì„±ê¸° V2.0 | AI ìœ í‹¸ë¦¬í‹° í”Œë«í¼</title>
    <meta name="description" content="AIê°€ ìƒí™©, ëŒ€ìƒ, í†¤, ê¸¸ì´ì— ë§ì¶° 3ê°€ì§€ ë²„ì „ì˜ ì™„ë²½í•œ ë¬¸êµ¬ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì œì•ˆí•´ë“œë¦½ë‹ˆë‹¤. ë³´ê³ ì„œ, ì´ë©”ì¼, ì‚¬ê³¼, ìš”ì²­ ë“± ëª¨ë“  ê¸€ì“°ê¸°ì˜ ì–´ë ¤ì›€ì„ í•´ê²°í•˜ì„¸ìš”." />
    <meta name="keywords" content="AI ë¬¸êµ¬ ìƒì„±ê¸°, AI ê¸€ì“°ê¸°, ì´ë©”ì¼ ìë™ ì‘ì„±, ë³´ê³ ì„œ ì‘ì„±ë²•, ë¹„ì¦ˆë‹ˆìŠ¤ ì´ë©”ì¼, ì •ì¤‘í•œ ê±°ì ˆ, ì‚¬ê³¼ ë¬¸ì, ê¸€ì“°ê¸° ë„ìš°ë¯¸, ë²„ì „ 2.0" />
    <link rel="canonical" href="https://ai-text-generator.pages.dev" />
    <meta property="og:title" content="AI ë¬¸êµ¬ ìƒì„±ê¸° V2.0 | 3ê°€ì§€ ì œì•ˆìœ¼ë¡œ ë” ì™„ë²½í•˜ê²Œ" />
    <meta property="og:description" content="ìƒí™©, ëŒ€ìƒ, í†¤, ê¸¸ì´ì— ë§ì¶° AIê°€ 3ê°€ì§€ ë²„ì „ì˜ ë¬¸êµ¬ë¥¼ ì œì•ˆí•©ë‹ˆë‹¤. ì´ì œ ê¸€ì“°ê¸° ê³ ë¯¼ì€ ë." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://ai-text-generator.pages.dev" />
    <meta property="og:image" content="https://ai-text-generator.pages.dev/og-image-v2.png" />
    <link rel="stylesheet" href="style.css">
</head>
<body>

<nav class="nav-bar">
    <ul class="nav-links">
        <li><a href="/" class="active">AI ë¬¸êµ¬ ìƒì„±ê¸°</a></li>
        <li><a href="/decision-helper.html">AI ë¹„êµ/íŒë‹¨ ë„ìš°ë¯¸</a></li>
        <li><a href="/calculator.html">AI íŠ¹í™” ê³„ì‚°ê¸°</a></li>
    </ul>
</nav>

<div class="container">
    <div class="header">
        <h1>AI ë¬¸êµ¬ ìƒì„±ê¸° âœ¨ <span class="version-badge">V2.0</span></h1>
        <p class="subtitle">ìƒí™©, ëŒ€ìƒ, í†¤, ê¸¸ì´ì— ë§ì¶° AIê°€ 3ê°€ì§€ ë²„ì „ì˜ ë¬¸êµ¬ë¥¼ ì œì•ˆí•©ë‹ˆë‹¤.</p>
    </div>

    <div class="form-grid">
        <div class="form-group">
            <label for="situation">ì–´ë–¤ ìƒí™©ì¸ê°€ìš”?</label>
            <select id="situation">
                <optgroup label="ì—…ë¬´">
                    <option value="report_progress">ì§„í–‰ ìƒí™© ë³´ê³ </option>
                    <option value="report_result">ê²°ê³¼ ë³´ê³ </option>
                    <option value="request_data">ìë£Œ ìš”ì²­</option>
                    <option value="request_feedback">í”¼ë“œë°± ìš”ì²­</option>
                    <option value="rejection_polite">ì •ì¤‘í•œ ê±°ì ˆ</option>
                    <option value="meeting_request">íšŒì˜ ìš”ì²­</option>
                </optgroup>
                <optgroup label="ì¼ìƒ">
                    <option value="apology_late">ì§€ê°/ì•½ì† ë³€ê²½ ì‚¬ê³¼</option>
                    <option value="appreciation">ê°ì‚¬ ì¸ì‚¬</option>
                    <option value="congratulation">ì¶•í•˜ (ìƒì¼, ìŠ¹ì§„ ë“±)</option>
                    <option value="condolence">ìœ„ë¡œ/ê²©ë ¤</option>
                </optgroup>
            </select>
        </div>

        <div class="form-group">
            <label for="target">ëˆ„êµ¬ì—ê²Œ ë³´ë‚´ë‚˜ìš”?</label>
            <select id="target">
                <option value="boss">ìƒì‚¬/ì„ ë°°</option>
                <option value="colleague">ë™ë£Œ</option>
                <option value="junior">ë¶€í•˜ì§ì›/í›„ë°°</option>
                <option value="client">ê³ ê°/ê±°ë˜ì²˜</option>
                <option value="friend">ì¹œêµ¬/ê°€ì¡±</option>
            </select>
        </div>

        <div class="form-group">
            <label for="length">ì–´ëŠ ì •ë„ ê¸¸ì´ë¡œ ì“¸ê¹Œìš”?</label>
            <select id="length">
                <option value="short">ì§§ê²Œ (1-2 ë¬¸ì¥)</option>
                <option value="medium" selected>ì¤‘ê°„ (3-5 ë¬¸ì¥)</option>
                <option value="long">ê¸¸ê²Œ (ì´ë©”ì¼ í˜•ì‹)</option>
            </select>
        </div>

        <div class="form-group">
            <label for="tone">ì–´ë–¤ í†¤ìœ¼ë¡œ ë§í• ê¹Œìš”?</label>
            <select id="tone">
                <option value="polite">ê²©ì‹ìˆê³  ì •ì¤‘í•˜ê²Œ</option>
                <option value="casual">ì¹œì ˆí•˜ê³  ë¶€ë“œëŸ½ê²Œ</option>
                <option value="direct">ê°„ê²°í•˜ê³  ëª…í™•í•˜ê²Œ</option>
                <option value="witty">ì¬ì¹˜ìˆê³  ìœ„íŠ¸ìˆê²Œ</option>
            </select>
        </div>
    </div>

    <div class="form-group">
        <label for="detail">ì¶”ê°€ ì •ë³´ (êµ¬ì²´ì ì¼ìˆ˜ë¡ ê²°ê³¼ê°€ ì¢‹ì•„ì ¸ìš”)</label>
        <textarea id="detail" rows="4" placeholder="ì˜ˆ: 1ë¶„ê¸° í”„ë¡œì íŠ¸ ì‹¤ì  ë³´ê³ ì…ë‹ˆë‹¤. ëª©í‘œ ëŒ€ë¹„ 120% ì´ˆê³¼ ë‹¬ì„±í–ˆìœ¼ë©°, íŠ¹íˆ A ì œí’ˆì˜ íŒë§¤ëŸ‰ì´ í¬ê²Œ ì¦ê°€í–ˆìŠµë‹ˆë‹¤."></textarea>
    </div>

    <button id="generateBtn" onclick="generateText()">ğŸš€ 3ê°€ì§€ ë¬¸êµ¬ ìƒì„±í•˜ê¸°</button>

    <div class="result-section">
        <h2>AI ì œì•ˆ (3ê°€ì§€ ë²„ì „)</h2>
        <div id="loader" style="display: none;">
            <div class="loader-inner"></div>
            <p>AIê°€ ìµœì ì˜ ë¬¸êµ¬ 3ê°€ì§€ë¥¼ ë§Œë“¤ê³  ìˆìŠµë‹ˆë‹¤...</p>
        </div>
        <div id="result-cards-container">
            <!-- ê²°ê³¼ ì¹´ë“œê°€ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤. -->
        </div>
    </div>

    <div class="history-section">
        <h2>ìµœê·¼ ìƒì„± ê¸°ë¡</h2>
        <ul id="history-list"></ul>
    </div>
</div>

<script>
    const generateBtn = document.getElementById('generateBtn');
    const resultCardsContainer = document.getElementById('result-cards-container');
    const loader = document.getElementById('loader');
    const historyList = document.getElementById('history-list');

    const situationSelect = document.getElementById('situation');
    const targetSelect = document.getElementById('target');
    const lengthSelect = document.getElementById('length');
    const toneSelect = document.getElementById('tone');
    const detailTextarea = document.getElementById('detail');

    document.addEventListener('DOMContentLoaded', () => loadHistory());

    async function generateText() {
        const [situation, target, length, tone, detail] = [situationSelect.value, targetSelect.value, lengthSelect.value, toneSelect.value, detailTextarea.value];

        resultCardsContainer.innerHTML = '';
        loader.style.display = 'block';
        generateBtn.disabled = true;
        generateBtn.innerText = 'AIê°€ ìƒê°í•˜ëŠ” ì¤‘...';

        try {
            const response = await fetch('/generate', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ situation, target, length, tone, detail })
            });

            if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);

            const data = await response.json();
            const texts = data.generatedTexts;

            if (!texts || !Array.isArray(texts) || texts.length === 0) {
                throw new Error("ì„œë²„ì—ì„œ ìœ íš¨í•œ ì‘ë‹µì„ ë°›ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.");
            }

            displayResultCards(texts);
            saveToHistory({ inputs: { situation, target, length, tone, detail }, outputs: texts });

        } catch (error) {
            console.error("API í˜¸ì¶œ ì˜¤ë¥˜:", error);
            resultCardsContainer.innerHTML = `<p class="error-message">ë¬¸êµ¬ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.</p>`;
        } finally {
            loader.style.display = 'none';
            generateBtn.disabled = false;
            generateBtn.innerText = 'ğŸš€ 3ê°€ì§€ ë¬¸êµ¬ ìƒì„±í•˜ê¸°';
        }
    }

    function displayResultCards(texts) {
        resultCardsContainer.innerHTML = '';
        texts.forEach((text, index) => {
            const card = document.createElement('div');
            card.className = 'result-card';
            card.innerHTML = `
                <div class="card-header">
                    <h3>AI ì œì•ˆ ${index + 1}</h3>
                    <button class="copy-btn" onclick="copyText(this)">ë³µì‚¬</button>
                </div>
                <p class="card-text">${text.replace(/
/g, '<br>')}</p>
            `;
            resultCardsContainer.appendChild(card);
        });
    }

    function copyText(buttonElement) {
        const cardText = buttonElement.closest('.result-card').querySelector('.card-text').innerText;
        navigator.clipboard.writeText(cardText).then(() => {
            buttonElement.innerText = 'ë³µì‚¬ ì™„ë£Œ!';
            setTimeout(() => { buttonElement.innerText = 'ë³µì‚¬'; }, 2000);
        }).catch(err => console.error('Copy failed', err));
    }

    // Phase 2ë¥¼ ìœ„í•œ ê°œì„ ëœ íˆìŠ¤í† ë¦¬ ì €ì¥
    function saveToHistory(record) {
        let history = JSON.parse(localStorage.getItem('generationHistoryV2')) || [];
        history.unshift(record);
        if (history.length > 5) history.pop();
        localStorage.setItem('generationHistoryV2', JSON.stringify(history));
        loadHistory();
    }
    
    // Phase 2ë¥¼ ìœ„í•œ ê°œì„ ëœ íˆìŠ¤í† ë¦¬ ë¡œë“œ
    function loadHistory() {
        historyList.innerHTML = '';
        const history = JSON.parse(localStorage.getItem('generationHistoryV2')) || [];
        history.forEach(record => {
            const li = document.createElement('li');
            li.className = 'history-item';
            const inputText = `[${record.inputs.situation}] ${record.inputs.detail.substring(0, 30)}...`;
            li.innerText = inputText;
            li.onclick = () => {
                situationSelect.value = record.inputs.situation;
                targetSelect.value = record.inputs.target;
                lengthSelect.value = record.inputs.length;
                toneSelect.value = record.inputs.tone;
                detailTextarea.value = record.inputs.detail;
                displayResultCards(record.outputs);
                window.scrollTo(0, 0);
            };
            historyList.appendChild(li);
        });
    }
</script>

</body>
</html>
