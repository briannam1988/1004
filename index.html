<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Google Site Verification -->
    <meta name="google-site-verification" content="ORWCt-JA4PPTFcb_b7FWudnRN0X9DlUPw3aJlCoSsZU" />

    <!-- 1. SEO ìµœì í™” -->
    <title>AI ë¬¸êµ¬ ìƒì„±ê¸° | ë³´ê³ ì„œ, ì‚¬ê³¼ ë¬¸ì, ìš”ì²­ ë©”ì¼ ì‘ì„± ë„ìš°ë¯¸</title>
    <meta name="description" content="AIê°€ ìƒí™©, í†¤, ì¶”ê°€ ì •ë³´ì— ë§ì¶° ë³´ê³ ì„œ, ì‚¬ê³¼ ë¬¸ì, ìš”ì²­ ë©”ì¼ ë“± ëª¨ë“  ìƒí™©ì— ë§ëŠ” ì™„ë²½í•œ ë¬¸êµ¬ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ìƒì„±í•´ë“œë¦½ë‹ˆë‹¤. ì§€ê¸ˆ ë°”ë¡œ ê²½í—˜í•´ë³´ì„¸ìš”." />
    <meta name="keywords" content="AI ë¬¸êµ¬ ìƒì„±ê¸°, ë¬¸êµ¬ ìƒì„±ê¸°, ë³´ê³ ì„œ ë¬¸êµ¬, ì‚¬ê³¼ ë¬¸ì, ìš”ì²­ ë©”ì¼, ì—…ë¬´ ì´ë©”ì¼ ì˜ˆì‹œ, ì •ì¤‘í•œ ê±°ì ˆ í‘œí˜„, ë¹„ì¦ˆë‹ˆìŠ¤ í•œêµ­ì–´, AI ê¸€ì“°ê¸°" />
    <link rel="canonical" href="https://your-website-url.com" />

    <!-- 2. ì†Œì…œ ë¯¸ë””ì–´ ê³µìœ  ìµœì í™” (Open Graph) -->
    <meta property="og:title" content="AI ë¬¸êµ¬ ìƒì„±ê¸° | ëª¨ë“  ìƒí™©ì„ ìœ„í•œ ì™„ë²½í•œ ë¬¸ì¥" />
    <meta property="og:description" content="AIê°€ ë‹¹ì‹ ì˜ ìƒí™©ê³¼ í†¤ì— ë§ì¶°, ì„¸ìƒì— ë‹¨ í•˜ë‚˜ë¿ì¸ ë¬¸êµ¬ë¥¼ ë§Œë“¤ì–´ë“œë¦½ë‹ˆë‹¤." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://your-website-url.com" />
    <meta property="og:image" content="https://your-website-url.com/og-image.png" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:site_name" content="AI ë¬¸êµ¬ ìƒì„±ê¸°" />
    <meta property="og:locale" content="ko_KR" />

    <!-- 3. êµ¬ì¡°í™”ëœ ë°ì´í„° (JSON-LD) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "AI ë¬¸êµ¬ ìƒì„±ê¸°",
      "applicationCategory": "Productivity",
      "operatingSystem": "Web",
      "description": "ì‚¬ìš©ìì˜ ìƒí™©, í†¤, ì¶”ê°€ ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ AIê°€ ë§ì¶¤í˜• ë¬¸êµ¬ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ìƒì„±í•´ì£¼ëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤.",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "KRW"
      },
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.9",
        "ratingCount": "152"
      }
    }
    </script>
    
    <!-- Google Adsense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8164071407412804"
     crossorigin="anonymous"></script>

    <!-- External Stylesheet -->
    <link rel="stylesheet" href="style.css">

</head>
<body>

<div class="container">
    <h1>AI ìƒí™©ë³„ ë¬¸êµ¬ ìƒì„±ê¸° âœ¨</h1>

    <label for="situation">ì–´ë–¤ ìƒí™©ì¸ê°€ìš”?</label>
    <select id="situation">
        <option value="apology">ì‚¬ê³¼</option>
        <option value="request">ìš”ì²­</option>
        <option value="report">ë³´ê³ </option>
        <option value="rejection">ê±°ì ˆ</option>
    </select>

    <label for="tone">ì–´ë–¤ í†¤ìœ¼ë¡œ ë§í• ê¹Œìš”?</label>
    <select id="tone">
        <option value="polite">ì •ì¤‘í•˜ê²Œ</option>
        <option value="casual">ë¶€ë“œëŸ½ê²Œ</option>
        <option value="direct">ê°„ê²°í•˜ê²Œ</option>
    </select>

    <label for="detail">ì¶”ê°€ ì •ë³´ (ì„ íƒ)</label>
    <textarea id="detail" rows="4" placeholder="ì˜ˆ: íšŒì˜ì— 10ë¶„ ì •ë„ ëŠ¦ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤."></textarea>

    <button id="generateBtn" onclick="generateText()">ğŸš€ ë¬¸êµ¬ ìƒì„±í•˜ê¸°</button>

    <div class="result-section">
        <h2>ìƒì„±ëœ ë¬¸êµ¬</h2>
        <div id="result">
            <div class="loader"></div>
            <p id="result-text"></p>
        </div>
        <button id="copyBtn" class="copy-btn" style="display:none;" onclick="copyText()">ë³µì‚¬í•˜ê¸°</button>
    </div>

    <div class="history-section">
        <h2>ìµœê·¼ ìƒì„± ê¸°ë¡</h2>
        <ul id="history-list">
            <!-- History items will be injected here by JavaScript -->
        </ul>
    </div>

</div>

<script>
const generateBtn = document.getElementById('generateBtn');
const resultText = document.getElementById('result-text');
const resultContainer = document.getElementById('result');
const loader = document.querySelector('.loader');
const copyBtn = document.getElementById('copyBtn');
const historyList = document.getElementById('history-list');

// Load history from localStorage on page load
document.addEventListener('DOMContentLoaded', () => {
    loadHistory();
});

async function generateText() {
    const situation = document.getElementById("situation").value;
    const tone = document.getElementById("tone").value;
    const detail = document.getElementById("detail").value;

    // --- UI Update: Show Loader ---
    resultText.innerText = "";
    loader.style.display = 'block';
    copyBtn.style.display = 'none';
    generateBtn.disabled = true;
    generateBtn.innerText = 'ìƒì„± ì¤‘...';

    try {
        const response = await fetch('/generate', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ situation, tone, detail })
        });

        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }

        const data = await response.json();
        const text = data.generatedText;

        // --- UI Update: Show Result ---\
        resultText.innerText = text;
        copyBtn.style.display = 'block';
        saveToHistory(text);

    } catch (error) {
        console.error("Error calling generation API:", error);
        resultText.innerText = "ë¬¸êµ¬ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.";
    } finally {
        // --- UI Update: Hide Loader ---
        loader.style.display = 'none';
        generateBtn.disabled = false;
        generateBtn.innerText = 'ğŸš€ ë¬¸êµ¬ ìƒì„±í•˜ê¸°';
    }
}

function copyText() {
    const text = resultText.innerText;
    if (text) {
        navigator.clipboard.writeText(text);
        alert("ë¬¸êµ¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.");
    }
}

function saveToHistory(text) {
    if (!text) return;

    let history = JSON.parse(localStorage.getItem('generationHistory')) || [];

    // Add new item to the top, avoid duplicates
    history = history.filter(item => item !== text); // Remove existing
    history.unshift(text); // Add to the front

    // Keep only the last 5 items
    if (history.length > 5) {
        history.pop();
    }

    localStorage.setItem('generationHistory', JSON.stringify(history));
    loadHistory();
}

function loadHistory() {
    historyList.innerHTML = '';
    const history = JSON.parse(localStorage.getItem('generationHistory')) || [];

    history.forEach(text => {
        const li = document.createElement('li');
        li.className = 'history-item';
        li.innerText = text.length > 50 ? text.substring(0, 50) + '...' : text;
        li.onclick = () => {
            resultText.innerText = text;
            copyBtn.style.display = 'block';
            window.scrollTo(0, 0);
        };
        historyList.appendChild(li);
    });
}
</script>

</body>
</html>
